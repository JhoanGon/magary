<fieldset
  class="magary-fieldset"
  [ngClass]="{
    'magary-fieldset-toggleable': toggleable(),
    'magary-fieldset-collapsed': collapsed(),
  }"
>
  @if (legend()) {
    <legend class="magary-fieldset-legend" [attr.id]="legendId">
      @if (toggleable()) {
        <button
          type="button"
          (click)="toggle($event)"
          class="magary-fieldset-toggler"
          [attr.aria-controls]="contentId"
          [attr.aria-expanded]="!collapsed()"
          [attr.aria-label]="legend()"
        >
          <lucide-icon
            [name]="collapsed() ? 'plus' : 'minus'"
            class="magary-fieldset-toggler-icon"
            [size]="16"
          ></lucide-icon>
          <span class="magary-fieldset-legend-text">{{ legend() }}</span>
        </button>
      } @else {
        <span class="magary-fieldset-legend-text">{{ legend() }}</span>
      }
    </legend>
  }
  <div
    [attr.id]="contentId"
    class="magary-fieldset-content-wrapper"
    [@fieldsetContent]="collapsed() ? 'hidden' : 'visible'"
    role="region"
    [attr.aria-labelledby]="legend() ? legendId : null"
  >
    <div class="magary-fieldset-content">
      <ng-content></ng-content>
    </div>
  </div>
</fieldset>
