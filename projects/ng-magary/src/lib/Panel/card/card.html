<article
  [ngClass]="cardClasses()"
  [ngStyle]="cardStyles()"
  [attr.role]="clickable() ? 'button' : 'region'"
  [attr.tabindex]="isInteractive() ? '0' : null"
  [attr.aria-label]="
    'Card with ' +
    (hasImage() ? 'image and ' : '') +
    'content' +
    (clickable() ? '. Clickable' : '') +
    (loading() ? '. Loading' : '') +
    (disabled() ? '. Disabled' : '')
  "
  [attr.aria-disabled]="disabled() ? 'true' : null"
  [attr.aria-busy]="loading() ? 'true' : null"
  (click)="onCardClick($event)"
  (keydown)="onCardKeydown($event)"
>
  @if (hasImage()) {
    <div class="card-image-container">
      <img
        class="card-img"
        [ngSrc]="img() || ''"
        [ngStyle]="imageStyles()"
        [alt]="altText()"
        fill
      />
    </div>
  }
  @if (badge()) {
    <span class="card-badge" [style.background-color]="badgeColor()">
      {{ badge() }}
    </span>
  }
  <div class="card-content">
    <div class="card-body">
      <header class="card-header">
        <ng-content select="[slot='header']"></ng-content>
      </header>
      <div class="card-main">
        <ng-content></ng-content>
      </div>
      <footer class="card-footer">
        <ng-content select="[slot='footer']"></ng-content>
      </footer>
    </div>
  </div>
  @if (showLoadingOverlay()) {
    <div
      class="card-loading-overlay"
      role="status"
      [attr.aria-label]="loadingText()"
    >
      <div class="loading-spinner" aria-hidden="true"></div>
      <span class="loading-text">{{ loadingText() }}</span>
    </div>
  }
</article>
