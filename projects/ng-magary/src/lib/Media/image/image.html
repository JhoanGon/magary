<div
  class="magary-image-content"
  [ngStyle]="{ width: width(), height: height() }"
>
  <img
    [src]="src()"
    [alt]="alt()"
    [style.width]="width()"
    [style.height]="height()"
    [style.object-fit]="objectFit()"
    [loading]="loading()"
    (load)="onImageLoad($event)"
    (error)="onImageError($event)"
    [ngStyle]="preview() ? { cursor: 'pointer' } : {}"
    (click)="onPreviewImageClick($event)"
  />
</div>

<dialog
  #previewDialog
  class="magary-image-preview-dialog"
  (click)="closePreview()"
  (cancel)="closePreview()"
>
  <div class="magary-image-toolbar" (click)="$event.stopPropagation()">
    <button class="magary-image-action" (click)="zoomOut()">
      <lucide-icon name="zoom-out"></lucide-icon>
    </button>
    <button class="magary-image-action" (click)="zoomIn()">
      <lucide-icon name="zoom-in"></lucide-icon>
    </button>
    <button class="magary-image-action" (click)="rotateLeft()">
      <lucide-icon name="rotate-ccw"></lucide-icon>
    </button>
    <button class="magary-image-action" (click)="rotateRight()">
      <lucide-icon name="rotate-cw"></lucide-icon>
    </button>
    <button class="magary-image-action" (click)="download()">
      <lucide-icon name="download"></lucide-icon>
    </button>
    <button class="magary-image-action" (click)="closePreview()">
      <lucide-icon name="x"></lucide-icon>
    </button>
  </div>
  <div class="magary-image-preview-content" (click)="$event.stopPropagation()">
    <img
      [src]="src()"
      [alt]="alt()"
      [ngStyle]="imagePreviewStyle()"
      class="preview-image"
    />
  </div>
</dialog>
