<div
  class="avatar-wrapper"
  [ngClass]="avatarClasses()"
  [ngStyle]="customStyle()"
  [attr.aria-label]="alt()"
  [attr.role]="clickable() ? 'button' : null"
  [attr.tabindex]="clickable() && !disabled() ? '0' : null"
  (click)="clickable() && onAvatarClick()"
  (keydown.enter)="clickable() && onAvatarClick()"
  (keydown.space)="clickable() && onAvatarClick()"
>
  @if (loading()) {
    <div class="avatar-loading">
      <lucide-icon name="loader" class="spin"></lucide-icon>
    </div>
  } @else {
    @if (shouldShowImage()) {
      <img
        [ngSrc]="image() || ''"
        [alt]="alt()"
        class="avatar-img"
        [ngClass]="shape()"
        [width]="sizePixels()"
        [height]="sizePixels()"
        (error)="onImageError()"
        (load)="onImageLoad()"
      />
    }
    @if (shouldShowIcon()) {
      <lucide-icon [name]="icon() || 'user'" class="avatar-icon"></lucide-icon>
    }
    @if (shouldShowLabel()) {
      <span class="avatar-label">{{ displayLabel() }}</span>
    }
  }
  @if (badgeValue()) {
    <div
      class="badge"
      [ngClass]="badgeSeverity()"
      [attr.aria-label]="'Badge: ' + badgeValue()"
      (click)="onBadgeClick($event)"
    >
      {{ badgeValue() }}
    </div>
  }
</div>
