<div [ngClass]="rootClass()" [ngStyle]="style() || {}">
  @for (item of model(); track item.label; let i = $index; let last = $last) {
    <!-- Step Item -->
    <div
      [class.magary-steps-item-active]="i === activeIndex()"
      [class.magary-steps-item-visited]="i < activeIndex()"
      [class.magary-steps-item-disabled]="
        item.disabled || (readonly() && i !== activeIndex())
      "
      class="magary-steps-item"
      (click)="onItemClick($event, item, i)"
    >
      <button class="magary-steps-action" tabindex="-1">
        @if (template()) {
          <ng-container
            *ngTemplateOutlet="
              template();
              context: {
                $implicit: item,
                index: i,
                active: i === activeIndex(),
              }
            "
          ></ng-container>
        } @else {
          <span class="magary-steps-number">{{ i + 1 }}</span>
          <span class="magary-steps-title">{{ item.label }}</span>
        }
      </button>
    </div>

    <!-- Separator (Line) -->
    @if (!last) {
      <div
        class="magary-steps-separator"
        [class.magary-steps-separator-active]="i < activeIndex()"
      ></div>
    }
  }
</div>
