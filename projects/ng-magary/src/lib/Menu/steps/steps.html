<div [ngClass]="rootClass()" [ngStyle]="style() || {}">
  <ng-container *ngFor="let item of model(); let i = index; let last = last">
    <!-- Step Item -->
    <div
      [class.magary-steps-item-active]="i === activeIndex()"
      [class.magary-steps-item-visited]="i < activeIndex()"
      [class.magary-steps-item-disabled]="
        item.disabled || (readonly() && i !== activeIndex())
      "
      class="magary-steps-item"
      (click)="onItemClick($event, item, i)"
    >
      <button class="magary-steps-action" tabindex="-1">
        <ng-container *ngIf="template(); else defaultContent">
          <ng-container
            *ngTemplateOutlet="
              template();
              context: {
                $implicit: item,
                index: i,
                active: i === activeIndex(),
              }
            "
          ></ng-container>
        </ng-container>
        <ng-template #defaultContent>
          <span class="magary-steps-number">{{ i + 1 }}</span>
          <span class="magary-steps-title">{{ item.label }}</span>
        </ng-template>
      </button>
    </div>

    <!-- Separator (Line) -->
    <div
      *ngIf="!last"
      class="magary-steps-separator"
      [class.magary-steps-separator-active]="i < activeIndex()"
    ></div>
  </ng-container>
</div>
