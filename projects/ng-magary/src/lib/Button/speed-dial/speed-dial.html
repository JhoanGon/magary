<div [ngClass]="containerClasses()" [ngStyle]="triggerStyles()">
  @if (showMask() && isOpen()) {
    <div class="speed-dial-mask" (click)="closeMask()" aria-hidden="true"></div>
  }
  <ul
    class="speed-dial-items"
    [attr.data-direction]="direction()"
    [ngStyle]="itemsStyles()"
    role="menu"
    [attr.aria-expanded]="isOpen()"
    [attr.aria-label]="ariaLabel()"
  >
    @for (item of items(); track trackByItem($index, item)) {
      <li
        [style.--i]="$index"
        [style.--radius.px]="radius()"
        [style.transition-delay]="itemTransitionDelay($index)"
        [class]="'item-' + type()"
        role="presentation"
      >
        @if (item.tooltip) {
          <div
            class="action-tooltip"
            role="tooltip"
            [attr.id]="'tooltip-' + $index"
          >
            {{ item.tooltip }}
          </div>
        }
        <button
          type="button"
          class="action-button"
          role="menuitem"
          [disabled]="item.disabled"
          [attr.aria-label]="
            item.ariaLabel || item.tooltip || 'Speed dial action'
          "
          [attr.aria-describedby]="item.tooltip ? 'tooltip-' + $index : null"
          [style.background-color]="item.backgroundColor"
          (click)="onItemClick($event, item)"
        >
          <lucide-icon [name]="item.icon" aria-hidden="true"></lucide-icon>
        </button>
      </li>
    }
  </ul>
  <button
    type="button"
    class="trigger-button"
    [attr.aria-label]="ariaLabel() + (isOpen() ? ' - Cerrar' : ' - Abrir')"
    [attr.aria-expanded]="isOpen()"
    [attr.aria-haspopup]="'menu'"
    (click)="toggleSpeedDial($event)"
  >
    <lucide-icon [name]="currentIcon()" aria-hidden="true"></lucide-icon>
  </button>
</div>
