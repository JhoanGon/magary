:host {
  display: inline-block;
  --checkbox-size: 1.25rem;
  --checkbox-radius: 0.375rem;
  --checkbox-transition: 0.18s ease;

  --cb-primary: var(--primary-500, #06b6d4);
  --cb-success: var(--success, #22c55e);
  --cb-danger: var(--danger, #ef4444);
  --cb-warning: var(--warning, #f59e0b);
  --cb-info: var(--info, #3b82f6);

  --cb-border: var(--surface-300, #cbd5e1);
  --cb-border-hover: var(--primary-400, #38bdf8);
  --cb-bg: var(--surface-0, #ffffff);
  --cb-bg-checked: var(--cb-primary);
  --cb-text: var(--text-primary, #0f172a);
  --cb-disabled-bg: var(--surface-100, #e2e8f0);
  --cb-disabled-border: var(--surface-300, #cbd5e1);
  --cb-focus-ring: color-mix(in srgb, var(--cb-bg-checked) 22%, transparent);
}

.magary-checkbox-container {
  font-family: inherit;

  &.checkbox-primary {
    --cb-bg-checked: var(--cb-primary);
  }
  &.checkbox-success {
    --cb-bg-checked: var(--cb-success);
  }
  &.checkbox-danger {
    --cb-bg-checked: var(--cb-danger);
  }
  &.checkbox-warning {
    --cb-bg-checked: var(--cb-warning);
  }
  &.checkbox-info {
    --cb-bg-checked: var(--cb-info);
  }
}

.checkbox-wrapper {
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  gap: 0.5rem;
  position: relative;
  user-select: none;
}

.hidden-input {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
  margin: 0;
}

.custom-checkbox {
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border: 1px solid var(--cb-border);
  border-radius: var(--checkbox-radius);
  background: var(--cb-bg);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition:
    border-color var(--checkbox-transition),
    box-shadow var(--checkbox-transition),
    background-color var(--checkbox-transition);
  position: relative;
  overflow: hidden;
}

.checkmark {
  width: 0.875rem;
  height: 0.875rem;
  color: #ffffff;
  opacity: 0;
  transform: scale(0.75);
  transition:
    opacity var(--checkbox-transition),
    transform var(--checkbox-transition);

  .checkmark-path {
    stroke-dasharray: 24;
    stroke-dashoffset: 24;
    transition: stroke-dashoffset 0.24s ease 0.06s;
  }
}

.checkbox-checked {
  .custom-checkbox {
    background: var(--cb-bg-checked);
    border-color: var(--cb-bg-checked);
  }

  .checkmark {
    opacity: 1;
    transform: scale(1);

    .checkmark-path {
      stroke-dashoffset: 0;
    }
  }
}

.checkbox-focused {
  .custom-checkbox {
    border-color: var(--cb-bg-checked);
    box-shadow: 0 0 0 3px var(--cb-focus-ring);
  }
}

.checkbox-wrapper:hover:not(.checkbox-disabled) {
  .custom-checkbox {
    border-color: var(--cb-border-hover);
  }
}

.checkbox-disabled {
  cursor: not-allowed;
  opacity: 0.72;

  .checkbox-wrapper {
    cursor: not-allowed;
  }

  .custom-checkbox {
    background: var(--cb-disabled-bg);
    border-color: var(--cb-disabled-border);
  }

  &.checkbox-checked .custom-checkbox {
    background: color-mix(in srgb, var(--cb-bg-checked) 45%, var(--cb-disabled-bg));
    border-color: color-mix(
      in srgb,
      var(--cb-bg-checked) 45%,
      var(--cb-disabled-border)
    );
  }
}

.checkbox-label {
  font-size: 0.95rem;
  color: var(--cb-text);
  transition: color var(--checkbox-transition);
}

@media (prefers-reduced-motion: reduce) {
  .custom-checkbox,
  .checkmark,
  .checkmark .checkmark-path,
  .checkbox-label {
    transition: none !important;
    animation: none !important;
  }
}
