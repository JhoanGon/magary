<div
  class="magary-slider-rail"
  (click)="onBarClick($event)"
  (touchstart)="onBarTouchStart($event)"
>
  <div
    class="magary-slider-range"
    [ngStyle]="
      orientation() === 'horizontal'
        ? { left: rangeStartPos() + '%', width: rangeWidth() + '%' }
        : { bottom: rangeStartPos() + '%', height: rangeWidth() + '%' }
    "
  ></div>

  @if (!range()) {
    <span
      #sliderHandle
      class="magary-slider-handle"
      role="slider"
      [tabindex]="isDisabled() ? -1 : 0"
      [attr.aria-label]="'Slider value'"
      [attr.aria-orientation]="orientation()"
      [attr.aria-valuemin]="min()"
      [attr.aria-valuemax]="max()"
      [attr.aria-valuenow]="getHandleAriaValue(0)"
      [ngStyle]="
        orientation() === 'horizontal'
          ? { left: handle1Pos() + '%' }
          : { bottom: handle1Pos() + '%' }
      "
      (mousedown)="onMouseDown($event, 0)"
      (touchstart)="onTouchStart($event, 0)"
      (keydown)="onHandleKeydown($event, 0)"
      (blur)="onHandleBlur()"
    >
    </span>
  } @else {
    <span
      #sliderHandleStart
      class="magary-slider-handle"
      role="slider"
      [tabindex]="isDisabled() ? -1 : 0"
      [attr.aria-label]="'Slider range start'"
      [attr.aria-orientation]="orientation()"
      [attr.aria-valuemin]="min()"
      [attr.aria-valuemax]="max()"
      [attr.aria-valuenow]="getHandleAriaValue(0)"
      [ngStyle]="
        orientation() === 'horizontal'
          ? { left: handle1Pos() + '%' }
          : { bottom: handle1Pos() + '%' }
      "
      (mousedown)="onMouseDown($event, 0)"
      (touchstart)="onTouchStart($event, 0)"
      (keydown)="onHandleKeydown($event, 0)"
      (blur)="onHandleBlur()"
    >
    </span>
    <span
      #sliderHandleEnd
      class="magary-slider-handle"
      role="slider"
      [tabindex]="isDisabled() ? -1 : 0"
      [attr.aria-label]="'Slider range end'"
      [attr.aria-orientation]="orientation()"
      [attr.aria-valuemin]="min()"
      [attr.aria-valuemax]="max()"
      [attr.aria-valuenow]="getHandleAriaValue(1)"
      [ngStyle]="
        orientation() === 'horizontal'
          ? { left: handle2Pos() + '%' }
          : { bottom: handle2Pos() + '%' }
      "
      (mousedown)="onMouseDown($event, 1)"
      (touchstart)="onTouchStart($event, 1)"
      (keydown)="onHandleKeydown($event, 1)"
      (blur)="onHandleBlur()"
    >
    </span>
  }
</div>
