<div class="layout">
  <magary-sidebar
    [sections]="sidebarSections()"
    [showUserSection]="true"
    [userName]="i18n.translateUi('demoUserName')"
    [userEmail]="i18n.translateUi('demoUserEmail')"
    [appTitle]="i18n.translateUi('brandName')"
    [logoSrc]="'/assets/magary_logo.webp'"
    [showLogo]="true"
    [showBrandLogo]="true"
    [showUserAvatar]="false"
    [showUserName]="false"
    [showUserEmail]="false"
    [showLogoutButton]="false"
    [brandLogoSrc]="'/assets/magary_logo.webp'"
    [brandLogoPosition]="'center'"
    [logoWidth]="414"
    [logoHeight]="603"
    [brandLogoWidth]="414"
    [brandLogoHeight]="603"
    [navigationLabel]="i18n.translateUi('navigationLabel')"
    [mobileMenuButtonLabel]="i18n.translateUi('openSidebarLabel')"
    [closeButtonLabel]="i18n.translateUi('closeSidebarLabel')"
    [appTitleStyle]="{
      background: 'var(--gradient-text)',
      '-webkit-background-clip': 'text',
      'background-clip': 'text',
      color: 'transparent',
      fontSize: '1.7rem',
    }"
    (onLogout)="handleLogout()"
    [avatarConfig]="{ type: 'label', shape: 'circle' }"
  ></magary-sidebar>

  <main class="main-container">
    <header class="top-bar">
      <div class="app-branding" routerLink="/" style="cursor: pointer">
        {{ i18n.translateUi("brandName") }}
        <span class="highlight"
          >{{ i18n.translateUi("demoBadge") }} v{{ version }}</span
        >
      </div>

      <div class="top-actions">
        <div
          class="language-switch"
          role="group"
          [attr.aria-label]="i18n.translateUi('languageSelector')"
        >
          <magary-segmented
            class="lang-control"
            [options]="languageOptions"
            optionLabel="label"
            optionValue="value"
            [value]="i18n.language()"
            [ariaLabel]="i18n.translateUi('languageSelector')"
            size="small"
            (valueChange)="onLanguageSelection($event)"
          ></magary-segmented>
        </div>

        @if (pwaService.installable()) {
          <magary-button
            icon="download"
            [label]="i18n.translateUi('installApp')"
            severity="info"
            variant="outlined"
            [rounded]="true"
            [iconSize]="17"
            size="small"
            (buttonClick)="pwaService.install()"
            styleClass="pwa-install-btn"
          ></magary-button>
        }
        <app-theme-switcher></app-theme-switcher>
      </div>
    </header>

    <section class="content-wrapper" #contentWrapper>
      <div class="content-container">
        <router-outlet></router-outlet>
      </div>
    </section>
  </main>
  <magary-toast [offsetY]="'5rem'" />

  <div class="floating-sponsor-btn">
    <magary-speed-dial
      icon="heart"
      type="quartercircle"
      direction="up-left"
      [items]="sponsorDialItems"
      [radius]="70"
      [triggerSize]="56"
      [itemSize]="44"
      [itemGap]="60"
      background="var(--danger)"
    ></magary-speed-dial>
  </div>
</div>
