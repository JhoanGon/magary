<div class="container fade-in">
  <div class="header">
    <h1>{{ t("components.grid.grid.title") }}</h1>
    <p>{{ t("components.grid.grid.subtitle") }}</p>
  </div>

  <div class="section">
    <div class="section-header">
      <h2>{{ t("components.grid.grid.import.title") }}</h2>
      <p>{{ t("components.grid.grid.import.desc") }}</p>
    </div>
    <div class="section-content">
      <div class="code-block">
        <pre><code [highlight]="importExample" language="typescript"></code></pre>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-header">
      <h2>{{ t("components.grid.grid.basic.title") }}</h2>
      <p>{{ t("components.grid.grid.basic.desc") }}</p>
    </div>
    <div class="section-content">
      <div class="demo-content">
        <magary-grid
          [columns]="basicColumns"
          [rowHeight]="basicRowHeight"
          [gap]="basicGap"
          [editable]="basicEditable"
        >
          @for (item of basicWidgets; track $index) {
            <magary-grid-item
              [col]="item.col"
              [row]="item.row"
              [cols]="item.cols"
              [rows]="item.rows"
              [resizable]="item.resizable"
              [movable]="item.movable"
              [locked]="item.locked"
            >
              <div class="basic-item" style="background: var(--primary-500)">
                {{ t(item.contentKey) }}
              </div>
            </magary-grid-item>
          }
        </magary-grid>
      </div>
      <div class="code-block" style="margin-top: 1rem">
        <magary-tabs
          [backgroundLine]="'#ed2c44'"
          [positionContent]="'flex-start'"
          [background]="'#282c34'"
        >
          <magary-tab [label]="t('components.grid.grid.tabs.html')">
            <pre><code [highlight]="basicExample" language="html"></code></pre>
          </magary-tab>
          <magary-tab [label]="t('components.grid.grid.tabs.ts')">
            <pre><code [highlight]="basicTS" language="typescript"></code></pre>
          </magary-tab>
        </magary-tabs>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-header">
      <h2>{{ t("components.grid.grid.dashboard.title") }}</h2>
      <p>{{ t("components.grid.grid.dashboard.desc") }}</p>
    </div>

    <div class="section-content">
      <div class="demo-content">
        <div
          style="
            margin-bottom: 1rem;
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
            flex-wrap: wrap;
          "
        >
          <magary-button
            [label]="t('components.grid.grid.dashboard.add.card')"
            icon="layout-grid"
            severity="info"
            (buttonClick)="addWidget('card')"
            size="small"
          ></magary-button>
          <magary-button
            [label]="t('components.grid.grid.dashboard.add.table')"
            icon="table"
            severity="info"
            (buttonClick)="addWidget('table')"
            size="small"
          ></magary-button>
          <magary-button
            [label]="t('components.grid.grid.dashboard.add.image')"
            icon="image"
            severity="info"
            (buttonClick)="addWidget('image')"
            size="small"
          ></magary-button>
        </div>

        <magary-grid
          [columns]="dashboardColumns"
          [rowHeight]="dashboardRowHeight"
          [gap]="dashboardGap"
          [editable]="dashboardEditable"
          [options]="dashboardOptions"
          (change)="onGridChange($event)"
          (itemsChange)="onDashboardItemsChange($event)"
        >
          @for (widget of dashboardWidgets(); track widget.id) {
            <magary-grid-item [item]="widget.item">
              <magary-card
                [shadow]="2"
                class="widget-card"
                width="100%"
                height="100%"
                [padding]="
                  widget.type === 'image' || widget.type === 'media'
                    ? '0'
                    : '1rem'
                "
              >
                @if (widget.type === "stats") {
                  <div class="stats-widget">
                    <div class="stats-info">
                      <span class="stats-title">{{ widgetTitle(widget) }}</span>
                      <span class="stats-value">{{ widget.value }}</span>
                      <span
                        class="stats-trend"
                        [style.color]="'var(--' + widget.color + '-600)'"
                        [style.background]="'var(--' + widget.color + '-50)'"
                      >
                        {{ widget.trend }}
                      </span>
                    </div>
                    <magary-avatar
                      [icon]="widget.icon"
                      size="large"
                      [customStyle]="{
                        'background-color': 'var(--' + widget.color + '-100)',
                        color: 'var(--' + widget.color + '-600)',
                      }"
                    >
                    </magary-avatar>
                  </div>
                }

                @if (widget.type === "card") {
                  <div
                    class="profile-widget"
                    style="
                      align-items: flex-start;
                      text-align: left;
                      padding: 1rem;
                    "
                  >
                    <h3>{{ widgetTitle(widget) }}</h3>
                    <p>{{ widgetContent(widget) }}</p>
                    <magary-button
                      [label]="
                        t('components.grid.grid.dashboard.widget.action')
                      "
                      size="small"
                      style="margin-top: auto"
                    ></magary-button>
                  </div>
                }

                @if (widget.type === "table") {
                  <div
                    style="
                      height: 100%;
                      overflow: hidden;
                      display: flex;
                      flex-direction: column;
                    "
                  >
                    <h4 style="margin: 0 0 1rem 0">
                      {{ widgetTitle(widget) }}
                    </h4>
                    <div style="flex: 1; overflow: auto; min-height: 0">
                      <magary-table
                        [value]="resolveTableData(widget.data ?? [])"
                        [columns]="tableColumns"
                        [paginator]="false"
                        [rows]="5"
                      >
                      </magary-table>
                    </div>
                  </div>
                }

                @if (widget.type === "image") {
                  <div
                    style="
                      width: 100%;
                      height: 100%;
                      display: flex;
                      flex-direction: column;
                    "
                  >
                    <h4 style="margin: 0; padding: 1rem 1rem 0.5rem 1rem">
                      {{ widgetTitle(widget) }}
                    </h4>
                    <div style="flex: 1; min-height: 0; overflow: hidden">
                      <magary-image
                        [src]="widget.src"
                        [preview]="true"
                        width="100%"
                        height="100%"
                        [objectFit]="'cover'"
                        style="width: 100%; height: 100%"
                      >
                      </magary-image>
                    </div>
                  </div>
                }

                @if (widget.type === "actions") {
                  <div class="actions-widget">
                    <h4>{{ widgetTitle(widget) }}</h4>
                    <div class="action-buttons">
                      <magary-button
                        [label]="
                          t('components.grid.grid.dashboard.widget.option1')
                        "
                        icon="check"
                        size="small"
                      ></magary-button>
                      <magary-button
                        [label]="
                          t('components.grid.grid.dashboard.widget.option2')
                        "
                        icon="x"
                        severity="secondary"
                        size="small"
                      ></magary-button>
                    </div>
                  </div>
                }

                @if (widget.type === "media") {
                  <div class="media-widget">
                    <h4>{{ widgetTitle(widget) }}</h4>
                    <div class="media-grid">
                      @for (img of widget.images; track img) {
                        <div class="media-item">
                          <magary-image
                            [src]="img"
                            [preview]="true"
                            width="100%"
                            height="100%"
                          ></magary-image>
                        </div>
                      }
                    </div>
                  </div>
                }

                @if (widget.type === "profile") {
                  <div class="profile-widget">
                    <magary-avatar
                      image="https://i.pravatar.cc/150"
                      size="xlarge"
                      shape="circle"
                    ></magary-avatar>
                    <div class="profile-info">
                      <h3>{{ widgetName(widget) }}</h3>
                      <p>{{ widgetRole(widget) }}</p>
                    </div>
                  </div>
                }
              </magary-card>
            </magary-grid-item>
          }
        </magary-grid>
      </div>

      <div class="code-block" style="margin-top: 1rem">
        <magary-tabs
          [backgroundLine]="'#ed2c44'"
          [positionContent]="'flex-start'"
          [background]="'#282c34'"
        >
          <magary-tab
            [label]="t('components.grid.grid.dashboard.tabs.simpleHtml')"
          >
            <pre><code [highlight]="dashboardSimpleExample" language="html"></code></pre>
          </magary-tab>
          <magary-tab
            [label]="t('components.grid.grid.dashboard.tabs.simpleTs')"
          >
            <pre><code [highlight]="dashboardSimpleTS" language="typescript"></code></pre>
          </magary-tab>
          <magary-tab
            [label]="t('components.grid.grid.dashboard.tabs.advancedHtml')"
          >
            <pre><code [highlight]="dashboardAdvancedExample" language="html"></code></pre>
          </magary-tab>
          <magary-tab
            [label]="t('components.grid.grid.dashboard.tabs.advancedTs')"
          >
            <pre><code [highlight]="dashboardAdvancedTS" language="typescript"></code></pre>
          </magary-tab>
        </magary-tabs>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-header">
      <h2>{{ t("components.grid.grid.gallery.title") }}</h2>
      <p>{{ t("components.grid.grid.gallery.desc") }}</p>
    </div>

    <div class="section-content">
      <div class="demo-content">
        <magary-grid [options]="galleryOptions">
          @for (img of galleryImages; track img.id) {
            <magary-grid-item [x]="img.x" [y]="img.y" [w]="img.w" [h]="img.h">
              <div class="gallery-item">
                <magary-image
                  [src]="img.src"
                  [alt]="t(img.altKey)"
                  [preview]="true"
                  width="100%"
                  height="100%"
                >
                </magary-image>
              </div>
            </magary-grid-item>
          }
        </magary-grid>
      </div>
      <div class="code-block" style="margin-top: 1rem">
        <magary-tabs
          [backgroundLine]="'#ed2c44'"
          [positionContent]="'flex-start'"
          [background]="'#282c34'"
        >
          <magary-tab [label]="t('components.grid.grid.tabs.html')">
            <pre><code [highlight]="galleryHTML" language="html"></code></pre>
          </magary-tab>
          <magary-tab [label]="t('components.grid.grid.tabs.ts')">
            <pre><code [highlight]="galleryTS" language="typescript"></code></pre>
          </magary-tab>
        </magary-tabs>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-header">
      <h2>{{ t("components.grid.grid.api.title") }}</h2>
      <p>{{ t("components.grid.grid.api.desc") }}</p>
    </div>

    <div class="section-content">
      <div class="table-wrapper">
        <table class="api-table">
          <thead>
            <tr>
              <th>{{ t("components.grid.grid.api.header.component") }}</th>
              <th>{{ t("components.grid.grid.api.header.property") }}</th>
              <th>{{ t("components.grid.grid.api.header.type") }}</th>
              <th>{{ t("components.grid.grid.api.header.description") }}</th>
            </tr>
          </thead>
          <tbody>
            @for (row of apiRows; track row.component + row.property) {
              <tr>
                <td>
                  <code>{{ row.component }}</code>
                </td>
                <td>
                  <code>{{ row.property }}</code>
                </td>
                <td>
                  <code>{{ row.type }}</code>
                </td>
                <td>{{ t(row.descriptionKey) }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
