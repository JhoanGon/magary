<div class="container fade-in">
  <div class="header">
    <h1>Magary OverlayPanel</h1>
    <p>
      Un panel flotante posicionado relativo a un elemento objetivo (Popover).
    </p>
  </div>

  <div class="section">
    <div class="section-header">
      <h2>Importación</h2>
    </div>
    <div class="section-content">
      <div class="code-block">
        <pre><code [highlight]="importRef" language="typescript"></code></pre>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-header">
      <h2>Básico</h2>
      <p>Haga clic en el botón para mostrar el panel superpuesto.</p>
    </div>
    <div class="section-content">
      <div class="demo-content">
        <div
          style="
            display: flex;
            gap: 1rem;
            justify-content: center;
            padding: 2rem;
          "
        >
          <magary-button
            (buttonClick)="op.toggle($event)"
            label="Toggle Overlay"
          ></magary-button>

          <magary-overlaypanel
            #op
            panelAriaLabel="Información rápida"
            (onShow)="onOverlayShow()"
            (onHide)="onOverlayHide()"
          >
            <div style="width: 300px">
              <h4 style="margin-top: 0">Contenido Personalizado</h4>
              <p>
                OverlayPanel puede contener cualquier contenido HTML o
                componentes Angular. Se ajusta automáticamente y se cierra al
                hacer clic fuera.
              </p>
            </div>
          </magary-overlaypanel>
        </div>
      </div>
      <div class="code-block" style="margin-top: 1rem">
        <magary-tabs
          [backgroundLine]="'#ed2c44'"
          [positionContent]="'flex-start'"
          [background]="'#282c34'"
          tabListAriaLabel="Overlay basic example code"
        >
          <magary-tab label="HTML">
            <pre><code [highlight]="codeBasic" language="html"></code></pre>
          </magary-tab>
          <magary-tab label="TypeScript">
            <pre><code [highlight]="tsCode" language="typescript"></code></pre>
          </magary-tab>
        </magary-tabs>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-header">
      <h2>Integración (Selección)</h2>
      <p>Ejemplo de uso para mostrar detalles de un elemento.</p>
    </div>
    <div class="section-content">
      <div class="demo-content">
        <div
          style="
            display: flex;
            gap: 1rem;
            justify-content: center;
            padding: 2rem;
          "
        >
          <!-- Using simple buttons for simulation instead of full table to avoid dependency issues in demo -->
          <magary-button
            (buttonClick)="selectProduct($event, products[0], op2)"
            icon="image"
            label="Ver Imagen (Bamboo Watch)"
          ></magary-button>
          <magary-button
            (buttonClick)="selectProduct($event, products[1], op2)"
            icon="image"
            label="Ver Imagen (Black Watch)"
            severity="secondary"
          ></magary-button>
        </div>

        <magary-overlaypanel
          #op2
          [showCloseIcon]="true"
          panelAriaLabel="Detalle del producto"
        >
          @if (selectedProduct) {
            <div style="text-align: center; padding: 1rem">
              <img
                [src]="
                  'https://primefaces.org/cdn/primeng/images/demo/product/' +
                  selectedProduct.image
                "
                [alt]="selectedProduct.name"
                style="
                  width: 100px;
                  display: block;
                  margin: 0 auto 1rem auto;
                  border-radius: 4px;
                  box-shadow: var(--shadow-sm);
                "
              />
              <span class="font-bold block">{{ selectedProduct.name }}</span>
              <span class="block text-secondary" style="margin-top: 0.5rem"
                >{{ selectedProduct.price }} USD</span
              >
            </div>
          }
        </magary-overlaypanel>

        <p style="margin-top: 1rem; color: var(--text-secondary)">
          Estado evento: {{ overlayEventSummary }}
        </p>
      </div>
      <div class="code-block" style="margin-top: 1rem">
        <magary-tabs
          [backgroundLine]="'#ed2c44'"
          [positionContent]="'flex-start'"
          [background]="'#282c34'"
          tabListAriaLabel="Overlay selection example code"
        >
          <magary-tab label="HTML">
            <pre><code [highlight]="codeTable" language="html"></code></pre>
          </magary-tab>
          <magary-tab label="TypeScript">
            <pre><code [highlight]="tsCode" language="typescript"></code></pre>
          </magary-tab>
        </magary-tabs>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-header">
      <h2>Propiedades (Inputs)</h2>
    </div>
    <div class="section-content">
      <div class="table-wrapper">
        <table class="api-table">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Tipo</th>
              <th>Por Defecto</th>
              <th>Descripción</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>dismissable</code></td>
              <td><code>boolean</code></td>
              <td><code>true</code></td>
              <td>Si es verdadero, se cierra al hacer clic fuera.</td>
            </tr>
            <tr>
              <td><code>showCloseIcon</code></td>
              <td><code>boolean</code></td>
              <td><code>false</code></td>
              <td>Muestra un icono para cerrar el panel.</td>
            </tr>
            <tr>
              <td><code>closeOnEscape</code></td>
              <td><code>boolean</code></td>
              <td><code>true</code></td>
              <td>Cierra el panel al presionar Escape.</td>
            </tr>
            <tr>
              <td><code>panelAriaLabel</code></td>
              <td><code>string</code></td>
              <td><code>'Overlay panel'</code></td>
              <td>Etiqueta accesible aplicada al contenedor del panel.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
