<div class="mcp-container fade-in">
  <div class="header">
    <h1>MCP</h1>
    <p>Guia rapida para conectar <code>magary-mcp</code> en tu IDE.</p>
  </div>

  <div class="steps-grid">
    <magary-card
      [width]="'100%'"
      [shadow]="3"
      [borderRadius]="'1rem'"
      [backgroundColor]="'var(--surface-0)'"
      [border]="'1px solid var(--surface-200)'"
      class="step-card"
    >
      <div slot="header">
        <div class="step-header">
          <span class="step-number">1</span>
          <h3>Endpoint oficial</h3>
        </div>
      </div>
      <div class="step-content">
        <p>
          Este es el endpoint remoto SSE del servidor MCP de Magary. Todas las
          configuraciones de esta pagina usan esta URL.
        </p>
        <div class="code-block">
          <pre><code [highlight]="endpoint" language="bash"></code></pre>
        </div>
      </div>
    </magary-card>

    <magary-card
      [width]="'100%'"
      [shadow]="3"
      [borderRadius]="'1rem'"
      [backgroundColor]="'var(--surface-0)'"
      [border]="'1px solid var(--surface-200)'"
      class="step-card"
    >
      <div slot="header">
        <div class="step-header">
          <span class="step-number">2</span>
          <h3>Configuracion recomendada (mcp-remote)</h3>
        </div>
      </div>
      <div class="step-content">
        <p>
          Para mejor compatibilidad entre clientes MCP, usa el bridge
          mcp-remote. Si tu cliente soporta URL remota directa, puedes usar la
          opcion alternativa.
        </p>
        <div class="code-grid">
          <div>
            <p class="block-label">Recomendada</p>
            <div class="code-block">
              <pre><code [highlight]="recommendedBridgeConfig" language="json"></code></pre>
            </div>
          </div>
          <div>
            <p class="block-label">Alternativa (URL directa)</p>
            <div class="code-block">
              <pre><code [highlight]="directRemoteConfig" language="json"></code></pre>
            </div>
          </div>
        </div>
      </div>
    </magary-card>

    <magary-card
      [width]="'100%'"
      [shadow]="3"
      [borderRadius]="'1rem'"
      [backgroundColor]="'var(--surface-0)'"
      [border]="'1px solid var(--surface-200)'"
      class="step-card"
    >
      <div slot="header">
        <div class="step-header">
          <span class="step-number">3</span>
          <h3>Codex (CLI + Extension)</h3>
        </div>
      </div>
      <div class="step-content">
        <p>Agrega el servidor, verifica y abre un chat nuevo en Codex.</p>
        <div class="code-grid">
          <div>
            <p class="block-label">Agregar servidor</p>
            <div class="code-block">
              <pre><code [highlight]="codexAddCommand" language="bash"></code></pre>
            </div>
          </div>
          <div>
            <p class="block-label">Verificar</p>
            <div class="code-block">
              <pre><code [highlight]="codexVerifyCommands" language="bash"></code></pre>
            </div>
          </div>
        </div>
        <p class="note">Config manual opcional: ~/.codex/config.toml</p>
        <div class="code-block">
          <pre><code [highlight]="codexToml" language="bash"></code></pre>
        </div>
      </div>
    </magary-card>

    <magary-card
      [width]="'100%'"
      [shadow]="3"
      [borderRadius]="'1rem'"
      [backgroundColor]="'var(--surface-0)'"
      [border]="'1px solid var(--surface-200)'"
      class="step-card"
    >
      <div slot="header">
        <div class="step-header">
          <span class="step-number">4</span>
          <h3>Cursor, Claude, Antigravity, VS Code</h3>
        </div>
      </div>
      <div class="step-content">
        <ul class="info-list">
          <li>
            VS Code: configura MCP desde tu extension cliente (UI o JSON), no
            hay un archivo universal del core de VS Code.
          </li>
          <li>
            Cursor: usa .cursor/mcp.json (proyecto) o ~/.cursor/mcp.json
            (global).
          </li>
          <li>
            Claude Desktop: edita el archivo de configuracion segun tu sistema.
          </li>
          <li>
            Antigravity: Agent panel > MCP Servers > Manage MCP Servers > View
            raw config.
          </li>
        </ul>
        <div class="code-grid">
          <div>
            <p class="block-label">Claude paths</p>
            <div class="code-block">
              <pre><code [highlight]="claudePathConfig" language="bash"></code></pre>
            </div>
          </div>
          <div>
            <p class="block-label">JSON recomendado para estos clientes</p>
            <div class="code-block">
              <pre><code [highlight]="recommendedBridgeConfig" language="json"></code></pre>
            </div>
          </div>
        </div>
      </div>
    </magary-card>

    <magary-card
      [width]="'100%'"
      [shadow]="3"
      [borderRadius]="'1rem'"
      [backgroundColor]="'var(--surface-0)'"
      [border]="'1px solid var(--surface-200)'"
      class="step-card"
    >
      <div slot="header">
        <div class="step-header">
          <span class="step-number">5</span>
          <h3>Verificacion y troubleshooting</h3>
        </div>
      </div>
      <div class="step-content">
        <p>
          Despues de configurar MCP, reinicia el IDE y abre una sesion nueva.
          Luego valida con estos prompts:
        </p>
        <div class="code-block">
          <pre><code [highlight]="verificationPrompts" language="bash"></code></pre>
        </div>
        <ul class="info-list">
          <li>Si no aparecen herramientas, reinicia IDE y chat/sesion.</li>
          <li>
            Si usas mcp-remote, verifica que Node.js y npx esten instalados.
          </li>
          <li>
            Si falla HTTPS en red corporativa, revisa proxy/SSL interception.
          </li>
        </ul>
      </div>
    </magary-card>
  </div>
</div>
